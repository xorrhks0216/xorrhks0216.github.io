<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì „ì„¸ê³„ ì‹œê³„</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --background-color: #f5f6fa;
            --text-color: #2c3e50;
            --card-background: #ffffff;
            --hover-shadow: 0 8px 25px rgba(52, 152, 219, 0.15);
            --danger-color: #e74c3c;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background: linear-gradient(135deg, #f5f6fa 0%, #e9ecef 100%);
            min-height: 100vh;
            padding: 1rem;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 1rem 0;
        }

        h1 {
            color: var(--primary-color);
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .description {
            color: var(--text-color);
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            max-width: 600px;
            margin: 0 auto;
            opacity: 0.8;
        }

        .controls {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .add-button {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
        }

        .add-button:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
        }

        .add-button:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
        }

        .api-key-section {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .api-key-input {
            padding: 0.5rem 1rem;
            border: 1px solid #ddd;
            border-radius: 20px;
            font-size: 0.9rem;
            width: 200px;
        }

        .api-key-label {
            font-size: 0.9rem;
            color: var(--text-color);
            opacity: 0.7;
        }

        .clocks-container {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            justify-content: center;
        }

        .clock-card {
            background: var(--card-background);
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(52, 152, 219, 0.1);
            position: relative;
            min-width: 280px;
            flex: 1 1 300px;
            max-width: 350px;
        }

        .clock-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
        }

        .clock-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .clock-city {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .clock-timezone {
            font-size: 0.85rem;
            color: #7f8c8d;
            margin-top: 0.25rem;
        }

        .menu-button {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #95a5a6;
            padding: 0.25rem;
            line-height: 1;
            transition: all 0.2s ease;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            position: relative;
        }

        .menu-button:hover {
            color: var(--primary-color);
            background: rgba(44, 62, 80, 0.1);
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--card-background);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            min-width: 120px;
            padding: 0.5rem 0;
            margin-top: 0.25rem;
            display: none;
            z-index: 100;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .dropdown-menu.active {
            display: block;
        }

        .dropdown-item {
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-color);
            font-size: 0.9rem;
        }

        .dropdown-item:hover {
            background: rgba(231, 76, 60, 0.1);
            color: var(--danger-color);
        }

        .dropdown-item.delete {
            color: var(--danger-color);
        }

        .clock-time {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--secondary-color);
            margin: 1rem 0;
            font-variant-numeric: tabular-nums;
        }

        .clock-date {
            font-size: 1rem;
            color: var(--text-color);
            opacity: 0.7;
            margin-bottom: 1rem;
        }

        .weather-section {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        .weather-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .weather-icon {
            font-size: 2rem;
        }

        .weather-details {
            flex: 1;
        }

        .weather-temp {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .weather-desc {
            font-size: 0.9rem;
            color: #7f8c8d;
        }

        .weather-loading {
            color: #95a5a6;
            font-size: 0.9rem;
        }

        .weather-error {
            color: var(--danger-color);
            font-size: 0.9rem;
        }

        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--card-background);
            border-radius: 15px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #95a5a6;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            color: var(--danger-color);
            background: rgba(231, 76, 60, 0.1);
        }

        .city-search {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            margin-bottom: 1rem;
        }

        .city-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .city-item {
            padding: 0.75rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0.5rem;
        }

        .city-item:hover {
            background: rgba(52, 152, 219, 0.1);
        }

        .city-item.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .city-name {
            font-weight: 500;
            color: var(--primary-color);
        }

        .city-timezone {
            font-size: 0.85rem;
            color: #7f8c8d;
            margin-top: 0.25rem;
        }

        .empty-state {
            text-align: center;
            padding: 3rem;
            color: #95a5a6;
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .empty-state-text {
            font-size: 1.1rem;
        }

        /* ëª¨ë°”ì¼ ìµœì í™” */
        @media (max-width: 768px) {
            .clocks-container {
                gap: 1rem;
            }

            .clock-card {
                min-width: 100%;
                max-width: 100%;
            }

            .controls {
                flex-direction: column;
                align-items: stretch;
            }

            .api-key-section {
                flex-direction: column;
                align-items: stretch;
            }

            .api-key-input {
                width: 100%;
            }

            .modal-content {
                padding: 1.5rem;
            }
        }

        /* ë‹¤í¬ëª¨ë“œ ì§€ì› */
        @media (prefers-color-scheme: dark) {
            :root {
                --primary-color: #3498db;
                --secondary-color: #e74c3c;
                --background-color: #1a1a1a;
                --text-color: #ffffff;
                --card-background: #2c2c2c;
            }

            body {
                background: linear-gradient(135deg, #1a1a1a 0%, #2c2c2c 100%);
            }

            .city-search {
                background: #1a1a1a;
                border-color: #444;
                color: var(--text-color);
            }

            .api-key-input {
                background: #1a1a1a;
                border-color: #444;
                color: var(--text-color);
            }

            .weather-section {
                border-top-color: #444;
            }

            .dropdown-menu {
                background: #2c2c2c;
                border-color: #444;
            }

            .dropdown-item {
                color: var(--text-color);
            }

            .dropdown-item:hover {
                background: rgba(231, 76, 60, 0.2);
            }
        }

        .back-link {
            display: inline-block;
            margin-bottom: 2rem;
            color: var(--secondary-color);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        .back-link:hover {
            color: #2980b9;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">â† í”„ë¡œì íŠ¸ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
        <header>
            <h1>ì „ì„¸ê³„ ì‹œê³„</h1>
            <p class="description">ì›í•˜ëŠ” ë„ì‹œë¥¼ ì¶”ê°€í•˜ì—¬ ì „ì„¸ê³„ ì—¬ëŸ¬ ì§€ì—­ì˜ í˜„ì¬ ì‹œê°„ì„ í•œ ë²ˆì— í™•ì¸í•˜ì„¸ìš”.</p>
        </header>

        <div class="controls">
            <button class="add-button" id="addButton">
                <span>+</span>
                <span>ë„ì‹œ ì¶”ê°€</span>
            </button>
            <div class="api-key-section">
                <label class="api-key-label" for="apiKeyInput">ë‚ ì”¨ API í‚¤:</label>
                <input type="text" class="api-key-input" id="apiKeyInput" placeholder="OpenWeatherMap API í‚¤ (ì„ íƒì‚¬í•­)">
            </div>
        </div>

        <div class="clocks-container" id="clocksContainer">
            <div class="empty-state" id="emptyState">
                <div class="empty-state-icon">ğŸ•</div>
                <div class="empty-state-text">ë„ì‹œë¥¼ ì¶”ê°€í•˜ì—¬ ì‹œê³„ë¥¼ ì‹œì‘í•˜ì„¸ìš”</div>
            </div>
        </div>
    </div>

    <!-- ë„ì‹œ ì„ íƒ ëª¨ë‹¬ -->
    <div class="modal" id="cityModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">ë„ì‹œ ì„ íƒ</h2>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
            <input type="text" class="city-search" id="citySearch" placeholder="ë„ì‹œ ê²€ìƒ‰...">
            <div class="city-list" id="cityList"></div>
        </div>
    </div>

    <script>
        // ì „ì„¸ê³„ ì£¼ìš” ë„ì‹œ ëª©ë¡ (ë„ì‹œëª…, íƒ€ì„ì¡´, ìœ„ë„, ê²½ë„)
        const cities = [
            // ì•„ì‹œì•„ - ë™ì•„ì‹œì•„
            { name: 'ì„œìš¸', timezone: 'Asia/Seoul', lat: 37.5665, lon: 126.9780 },
            { name: 'ë¶€ì‚°', timezone: 'Asia/Seoul', lat: 35.1796, lon: 129.0756 },
            { name: 'ë„ì¿„', timezone: 'Asia/Tokyo', lat: 35.6762, lon: 139.6503 },
            { name: 'ì˜¤ì‚¬ì¹´', timezone: 'Asia/Tokyo', lat: 34.6937, lon: 135.5023 },
            { name: 'ë² ì´ì§•', timezone: 'Asia/Shanghai', lat: 39.9042, lon: 116.4074 },
            { name: 'ìƒí•˜ì´', timezone: 'Asia/Shanghai', lat: 31.2304, lon: 121.4737 },
            { name: 'ê´‘ì €ìš°', timezone: 'Asia/Shanghai', lat: 23.1291, lon: 113.2644 },
            { name: 'í™ì½©', timezone: 'Asia/Hong_Kong', lat: 22.3193, lon: 114.1694 },
            { name: 'íƒ€ì´ë² ì´', timezone: 'Asia/Taipei', lat: 25.0330, lon: 121.5654 },
            { name: 'ë§ˆë‹ë¼', timezone: 'Asia/Manila', lat: 14.5995, lon: 120.9842 },
            { name: 'ë°©ì½•', timezone: 'Asia/Bangkok', lat: 13.7563, lon: 100.5018 },
            { name: 'í•˜ë…¸ì´', timezone: 'Asia/Ho_Chi_Minh', lat: 21.0285, lon: 105.8542 },
            { name: 'í˜¸ì¹˜ë¯¼', timezone: 'Asia/Ho_Chi_Minh', lat: 10.8231, lon: 106.6297 },
            { name: 'ì¿ ì•Œë¼ë£¸í‘¸ë¥´', timezone: 'Asia/Kuala_Lumpur', lat: 3.1390, lon: 101.6869 },
            { name: 'ì‹±ê°€í¬ë¥´', timezone: 'Asia/Singapore', lat: 1.3521, lon: 103.8198 },
            { name: 'ìì¹´ë¥´íƒ€', timezone: 'Asia/Jakarta', lat: -6.2088, lon: 106.8456 },
            { name: 'ë°˜ë‹¤ë¥´ìŠ¤ë¦¬ë¸Œê°€ì™„', timezone: 'Asia/Brunei', lat: 4.9031, lon: 114.9398 },
            
            // ì•„ì‹œì•„ - ë‚¨ì•„ì‹œì•„
            { name: 'ë‰´ë¸ë¦¬', timezone: 'Asia/Kolkata', lat: 28.6139, lon: 77.2090 },
            { name: 'ë­„ë°”ì´', timezone: 'Asia/Kolkata', lat: 19.0760, lon: 72.8777 },
            { name: 'ë°©ê°ˆë¡œë¥´', timezone: 'Asia/Kolkata', lat: 12.9716, lon: 77.5946 },
            { name: 'ì½œì¹´íƒ€', timezone: 'Asia/Kolkata', lat: 22.5726, lon: 88.3639 },
            { name: 'ì²´ë‚˜ì´', timezone: 'Asia/Kolkata', lat: 13.0827, lon: 80.2707 },
            { name: 'ì¹´ë¼ì¹˜', timezone: 'Asia/Karachi', lat: 24.8607, lon: 67.0011 },
            { name: 'ë¼í˜¸ë¥´', timezone: 'Asia/Karachi', lat: 31.5204, lon: 74.3587 },
            { name: 'ì´ìŠ¬ë¼ë§ˆë°”ë“œ', timezone: 'Asia/Karachi', lat: 33.6844, lon: 73.0479 },
            { name: 'ë‹¤ì¹´', timezone: 'Asia/Dhaka', lat: 23.8103, lon: 90.4125 },
            { name: 'ì½œë¡¬ë³´', timezone: 'Asia/Colombo', lat: 6.9271, lon: 79.8612 },
            { name: 'ì¹´íŠ¸ë§Œë‘', timezone: 'Asia/Kathmandu', lat: 27.7172, lon: 85.3240 },
            
            // ì•„ì‹œì•„ - ì¤‘ë™
            { name: 'ë‘ë°”ì´', timezone: 'Asia/Dubai', lat: 25.2048, lon: 55.2708 },
            { name: 'ì•„ë¶€ë‹¤ë¹„', timezone: 'Asia/Dubai', lat: 24.4539, lon: 54.3773 },
            { name: 'ë¦¬ì•¼ë“œ', timezone: 'Asia/Riyadh', lat: 24.7136, lon: 46.6753 },
            { name: 'ì œë‹¤', timezone: 'Asia/Riyadh', lat: 21.4858, lon: 39.1925 },
            { name: 'í…”ì•„ë¹„ë¸Œ', timezone: 'Asia/Jerusalem', lat: 32.0853, lon: 34.7818 },
            { name: 'ì˜ˆë£¨ì‚´ë ˜', timezone: 'Asia/Jerusalem', lat: 31.7683, lon: 35.2137 },
            { name: 'ë² ì´ë£¨íŠ¸', timezone: 'Asia/Beirut', lat: 33.8938, lon: 35.5018 },
            { name: 'ì•”ë§Œ', timezone: 'Asia/Amman', lat: 31.9539, lon: 35.9106 },
            { name: 'ë°”ê·¸ë‹¤ë“œ', timezone: 'Asia/Baghdad', lat: 33.3152, lon: 44.3661 },
            { name: 'í…Œí—¤ë€', timezone: 'Asia/Tehran', lat: 35.6892, lon: 51.3890 },
            { name: 'ì¿ ì›¨ì´íŠ¸ì‹œí‹°', timezone: 'Asia/Kuwait', lat: 29.3759, lon: 47.9774 },
            { name: 'ë„í•˜', timezone: 'Asia/Qatar', lat: 25.2854, lon: 51.5310 },
            { name: 'ë§ˆë‚˜ë§ˆ', timezone: 'Asia/Bahrain', lat: 26.0667, lon: 50.5577 },
            { name: 'ë¬´ìŠ¤ì¹´íŠ¸', timezone: 'Asia/Muscat', lat: 23.5859, lon: 58.4059 },
            
            // ì•„ì‹œì•„ - ì¤‘ì•™ì•„ì‹œì•„
            { name: 'ì•Œë§ˆí‹°', timezone: 'Asia/Almaty', lat: 43.2220, lon: 76.8512 },
            { name: 'íƒ€ìŠˆì¼„íŠ¸', timezone: 'Asia/Tashkent', lat: 41.2995, lon: 69.2401 },
            { name: 'ë¹„ìŠˆì¼€í¬', timezone: 'Asia/Bishkek', lat: 42.8746, lon: 74.5698 },
            
            // ìœ ëŸ½ - ì„œìœ ëŸ½
            { name: 'ëŸ°ë˜', timezone: 'Europe/London', lat: 51.5074, lon: -0.1278 },
            { name: 'íŒŒë¦¬', timezone: 'Europe/Paris', lat: 48.8566, lon: 2.3522 },
            { name: 'ì•”ìŠ¤í…Œë¥´ë‹´', timezone: 'Europe/Amsterdam', lat: 52.3676, lon: 4.9041 },
            { name: 'ë¸Œë¤¼ì…€', timezone: 'Europe/Brussels', lat: 50.8503, lon: 4.3517 },
            { name: 'ë£©ì…ˆë¶€ë¥´í¬', timezone: 'Europe/Luxembourg', lat: 49.6116, lon: 6.1319 },
            { name: 'ì·¨ë¦¬íˆ', timezone: 'Europe/Zurich', lat: 47.3769, lon: 8.5417 },
            { name: 'ì œë„¤ë°”', timezone: 'Europe/Zurich', lat: 46.2044, lon: 6.1432 },
            { name: 'ë¹ˆ', timezone: 'Europe/Vienna', lat: 48.2082, lon: 16.3738 },
            { name: 'ë² ë¥¼ë¦°', timezone: 'Europe/Berlin', lat: 52.5200, lon: 13.4050 },
            { name: 'ë®Œí—¨', timezone: 'Europe/Berlin', lat: 48.1351, lon: 11.5820 },
            { name: 'í•¨ë¶€ë¥´í¬', timezone: 'Europe/Berlin', lat: 53.5511, lon: 9.9937 },
            { name: 'í”„ë‘í¬í‘¸ë¥´íŠ¸', timezone: 'Europe/Berlin', lat: 50.1109, lon: 8.6821 },
            { name: 'ì½”íœí•˜ê²', timezone: 'Europe/Copenhagen', lat: 55.6761, lon: 12.5683 },
            { name: 'ìŠ¤í†¡í™€ë¦„', timezone: 'Europe/Stockholm', lat: 59.3293, lon: 18.0686 },
            { name: 'ì˜¤ìŠ¬ë¡œ', timezone: 'Europe/Oslo', lat: 59.9139, lon: 10.7522 },
            { name: 'í—¬ì‹±í‚¤', timezone: 'Europe/Helsinki', lat: 60.1699, lon: 24.9384 },
            
            // ìœ ëŸ½ - ë‚¨ìœ ëŸ½
            { name: 'ë§ˆë“œë¦¬ë“œ', timezone: 'Europe/Madrid', lat: 40.4168, lon: -3.7038 },
            { name: 'ë°”ë¥´ì…€ë¡œë‚˜', timezone: 'Europe/Madrid', lat: 41.3851, lon: 2.1734 },
            { name: 'ë¡œë§ˆ', timezone: 'Europe/Rome', lat: 41.9028, lon: 12.4964 },
            { name: 'ë°€ë¼ë…¸', timezone: 'Europe/Rome', lat: 45.4642, lon: 9.1900 },
            { name: 'ë¦¬ìŠ¤ë³¸', timezone: 'Europe/Lisbon', lat: 38.7223, lon: -9.1393 },
            { name: 'ì•„í…Œë„¤', timezone: 'Europe/Athens', lat: 37.9838, lon: 23.7275 },
            { name: 'ì´ìŠ¤íƒ„ë¶ˆ', timezone: 'Europe/Istanbul', lat: 41.0082, lon: 28.9784 },
            { name: 'ì•ˆì¹´ë¼', timezone: 'Europe/Istanbul', lat: 39.9334, lon: 32.8597 },
            
            // ìœ ëŸ½ - ë™ìœ ëŸ½
            { name: 'ëª¨ìŠ¤í¬ë°”', timezone: 'Europe/Moscow', lat: 55.7558, lon: 37.6173 },
            { name: 'ìƒíŠ¸í˜í…Œë¥´ë¶€ë¥´í¬', timezone: 'Europe/Moscow', lat: 59.9343, lon: 30.3351 },
            { name: 'í‚¤ì˜ˆí”„', timezone: 'Europe/Kiev', lat: 50.4501, lon: 30.5234 },
            { name: 'ë°”ë¥´ìƒ¤ë°”', timezone: 'Europe/Warsaw', lat: 52.2297, lon: 21.0122 },
            { name: 'í”„ë¼í•˜', timezone: 'Europe/Prague', lat: 50.0755, lon: 14.4378 },
            { name: 'ë¶€ë‹¤í˜ìŠ¤íŠ¸', timezone: 'Europe/Budapest', lat: 47.4979, lon: 19.0402 },
            { name: 'ë¶€ì¿ ë ˆìŠˆí‹°', timezone: 'Europe/Bucharest', lat: 44.4268, lon: 26.1025 },
            { name: 'ì†Œí”¼ì•„', timezone: 'Europe/Sofia', lat: 42.6977, lon: 23.3219 },
            { name: 'ë² ì˜¤ê·¸ë¼ë“œ', timezone: 'Europe/Belgrade', lat: 44.7866, lon: 20.4489 },
            { name: 'ìê·¸ë ˆë¸Œ', timezone: 'Europe/Zagreb', lat: 45.8150, lon: 15.9819 },
            
            // ì•„í”„ë¦¬ì¹´
            { name: 'ì¹´ì´ë¡œ', timezone: 'Africa/Cairo', lat: 30.0444, lon: 31.2357 },
            { name: 'ì•Œë ‰ì‚°ë“œë¦¬ì•„', timezone: 'Africa/Cairo', lat: 31.2001, lon: 29.9187 },
            { name: 'ì¹´ì‚¬ë¸”ë‘ì¹´', timezone: 'Africa/Casablanca', lat: 33.5731, lon: -7.5898 },
            { name: 'ë¼ë°”íŠ¸', timezone: 'Africa/Casablanca', lat: 34.0209, lon: -6.8416 },
            { name: 'íŠ€ë‹ˆìŠ¤', timezone: 'Africa/Tunis', lat: 36.8065, lon: 10.1815 },
            { name: 'ì•Œì œ', timezone: 'Africa/Algiers', lat: 36.7538, lon: 3.0588 },
            { name: 'ë¼ê³ ìŠ¤', timezone: 'Africa/Lagos', lat: 6.5244, lon: 3.3792 },
            { name: 'ì•„ë¹„ì”', timezone: 'Africa/Abidjan', lat: 5.3600, lon: -4.0083 },
            { name: 'ì•„í¬ë¼', timezone: 'Africa/Accra', lat: 5.6037, lon: -0.1870 },
            { name: 'ë‚˜ì´ë¡œë¹„', timezone: 'Africa/Nairobi', lat: -1.2921, lon: 36.8219 },
            { name: 'ë‹¤ë¥´ì—ìŠ¤ì‚´ëŒ', timezone: 'Africa/Dar_es_Salaam', lat: -6.7924, lon: 39.2083 },
            { name: 'ì•„ë””ìŠ¤ì•„ë°”ë°”', timezone: 'Africa/Addis_Ababa', lat: 9.1450, lon: 38.7667 },
            { name: 'ìš”í•˜ë„¤ìŠ¤ë²„ê·¸', timezone: 'Africa/Johannesburg', lat: -26.2041, lon: 28.0473 },
            { name: 'ì¼€ì´í”„íƒ€ìš´', timezone: 'Africa/Johannesburg', lat: -33.9249, lon: 18.4241 },
            { name: 'ë”ë°˜', timezone: 'Africa/Johannesburg', lat: -29.8587, lon: 31.0218 },
            
            // ë¶ë¯¸ - ë¯¸êµ­
            { name: 'ë‰´ìš•', timezone: 'America/New_York', lat: 40.7128, lon: -74.0060 },
            { name: 'ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤', timezone: 'America/Los_Angeles', lat: 34.0522, lon: -118.2437 },
            { name: 'ì‹œì¹´ê³ ', timezone: 'America/Chicago', lat: 41.8781, lon: -87.6298 },
            { name: 'íœ´ìŠ¤í„´', timezone: 'America/Chicago', lat: 29.7604, lon: -95.3698 },
            { name: 'í”¼ë‹‰ìŠ¤', timezone: 'America/Phoenix', lat: 33.4484, lon: -112.0740 },
            { name: 'í•„ë¼ë¸í”¼ì•„', timezone: 'America/New_York', lat: 39.9526, lon: -75.1652 },
            { name: 'ìƒŒì•ˆí† ë‹ˆì˜¤', timezone: 'America/Chicago', lat: 29.4241, lon: -98.4936 },
            { name: 'ìƒŒë””ì—ì´ê³ ', timezone: 'America/Los_Angeles', lat: 32.7157, lon: -117.1611 },
            { name: 'ëŒˆëŸ¬ìŠ¤', timezone: 'America/Chicago', lat: 32.7767, lon: -96.7970 },
            { name: 'ì‚°í˜¸ì„¸', timezone: 'America/Los_Angeles', lat: 37.3382, lon: -121.8863 },
            { name: 'ì˜¤ìŠ¤í‹´', timezone: 'America/Chicago', lat: 30.2672, lon: -97.7431 },
            { name: 'ì­ìŠ¨ë¹Œ', timezone: 'America/New_York', lat: 30.3322, lon: -81.6557 },
            { name: 'ìƒŒí”„ë€ì‹œìŠ¤ì½”', timezone: 'America/Los_Angeles', lat: 37.7749, lon: -122.4194 },
            { name: 'ì¸ë””ì• ë‚˜í´ë¦¬ìŠ¤', timezone: 'America/Indiana/Indianapolis', lat: 39.7684, lon: -86.1581 },
            { name: 'ì½œëŸ¼ë²„ìŠ¤', timezone: 'America/New_York', lat: 39.9612, lon: -82.9988 },
            { name: 'í¬íŠ¸ì›ŒìŠ¤', timezone: 'America/Chicago', lat: 32.7555, lon: -97.3308 },
            { name: 'ìƒ¬ëŸ¿', timezone: 'America/New_York', lat: 35.2271, lon: -80.8431 },
            { name: 'ì‹œì• í‹€', timezone: 'America/Los_Angeles', lat: 47.6062, lon: -122.3321 },
            { name: 'ë´ë²„', timezone: 'America/Denver', lat: 39.7392, lon: -104.9903 },
            { name: 'ì›Œì‹±í„´', timezone: 'America/New_York', lat: 38.9072, lon: -77.0369 },
            { name: 'ë³´ìŠ¤í„´', timezone: 'America/New_York', lat: 42.3601, lon: -71.0589 },
            { name: 'ì—˜íŒŒì†Œ', timezone: 'America/Denver', lat: 31.7619, lon: -106.4850 },
            { name: 'ë””íŠ¸ë¡œì´íŠ¸', timezone: 'America/Detroit', lat: 42.3314, lon: -83.0458 },
            { name: 'ë‚´ìŠˆë¹Œ', timezone: 'America/Chicago', lat: 36.1627, lon: -86.7816 },
            { name: 'ë©¤í”¼ìŠ¤', timezone: 'America/Chicago', lat: 35.1495, lon: -90.0490 },
            { name: 'í¬íŠ¸ëœë“œ', timezone: 'America/Los_Angeles', lat: 45.5152, lon: -122.6784 },
            { name: 'ì˜¤í´ë¼í˜¸ë§ˆì‹œí‹°', timezone: 'America/Chicago', lat: 35.4676, lon: -97.5164 },
            { name: 'ë¼ìŠ¤ë² ì´ê±°ìŠ¤', timezone: 'America/Los_Angeles', lat: 36.1699, lon: -115.1398 },
            { name: 'ë£¨ì´ë¹Œ', timezone: 'America/New_York', lat: 38.2527, lon: -85.7585 },
            { name: 'ë³¼í‹°ëª¨ì–´', timezone: 'America/New_York', lat: 39.2904, lon: -76.6122 },
            { name: 'ë°€ì›Œí‚¤', timezone: 'America/Chicago', lat: 43.0389, lon: -87.9065 },
            { name: 'ì•Œë¶€ì»¤í‚¤', timezone: 'America/Denver', lat: 35.0844, lon: -106.6504 },
            { name: 'íˆ¬ì†', timezone: 'America/Phoenix', lat: 32.2226, lon: -110.9747 },
            { name: 'í”„ë ˆì¦ˆë…¸', timezone: 'America/Los_Angeles', lat: 36.7378, lon: -119.7871 },
            { name: 'ìƒˆí¬ë¼ë©˜í† ', timezone: 'America/Los_Angeles', lat: 38.5816, lon: -121.4944 },
            { name: 'ë¡±ë¹„ì¹˜', timezone: 'America/Los_Angeles', lat: 33.7701, lon: -118.1937 },
            { name: 'ìº”ììŠ¤ì‹œí‹°', timezone: 'America/Chicago', lat: 39.0997, lon: -94.5786 },
            { name: 'ë©”ì‚¬', timezone: 'America/Phoenix', lat: 33.4152, lon: -111.8315 },
            { name: 'ì• í‹€ëœíƒ€', timezone: 'America/New_York', lat: 33.7490, lon: -84.3880 },
            { name: 'ì½œë¡œë¼ë„ìŠ¤í”„ë§ìŠ¤', timezone: 'America/Denver', lat: 38.8339, lon: -104.8214 },
            { name: 'ë¡¤ë¦¬', timezone: 'America/New_York', lat: 35.7796, lon: -78.6382 },
            { name: 'ì˜¤ë§ˆí•˜', timezone: 'America/Chicago', lat: 41.2565, lon: -95.9345 },
            { name: 'ë§ˆì´ì• ë¯¸', timezone: 'America/New_York', lat: 25.7617, lon: -80.1918 },
            { name: 'ì˜¤í´ëœë“œ', timezone: 'America/Los_Angeles', lat: 37.8044, lon: -122.2712 },
            { name: 'ë¯¸ë‹ˆì• í´ë¦¬ìŠ¤', timezone: 'America/Chicago', lat: 44.9778, lon: -93.2650 },
            { name: 'í„¸ì‚¬', timezone: 'America/Chicago', lat: 36.1540, lon: -95.9928 },
            { name: 'í´ë¦¬ë¸”ëœë“œ', timezone: 'America/New_York', lat: 41.4993, lon: -81.6944 },
            { name: 'ìœ„ì¹˜íƒ€', timezone: 'America/Chicago', lat: 37.6872, lon: -97.3301 },
            { name: 'ì•„ë¥¼ë§í„´', timezone: 'America/Chicago', lat: 32.7357, lon: -97.1081 },
            
            // ë¶ë¯¸ - ìºë‚˜ë‹¤
            { name: 'í† ë¡ í† ', timezone: 'America/Toronto', lat: 43.6532, lon: -79.3832 },
            { name: 'ë°´ì¿ ë²„', timezone: 'America/Vancouver', lat: 49.2827, lon: -123.1207 },
            { name: 'ëª¬íŠ¸ë¦¬ì˜¬', timezone: 'America/Toronto', lat: 45.5017, lon: -73.5673 },
            { name: 'ìº˜ê±°ë¦¬', timezone: 'America/Edmonton', lat: 51.0447, lon: -114.0719 },
            { name: 'ì˜¤íƒ€ì™€', timezone: 'America/Toronto', lat: 45.4215, lon: -75.6972 },
            { name: 'ì—ë“œë¨¼í„´', timezone: 'America/Edmonton', lat: 53.5461, lon: -113.4938 },
            { name: 'ìœ„ë‹ˆí™', timezone: 'America/Winnipeg', lat: 49.8951, lon: -97.1384 },
            { name: 'í€˜ë²¡', timezone: 'America/Toronto', lat: 46.8139, lon: -71.2080 },
            { name: 'í•¼ë¦¬íŒ©ìŠ¤', timezone: 'America/Halifax', lat: 44.6488, lon: -63.5752 },
            
            // ë¶ë¯¸ - ë©•ì‹œì½” ë° ì¤‘ë¯¸
            { name: 'ë©•ì‹œì½”ì‹œí‹°', timezone: 'America/Mexico_City', lat: 19.4326, lon: -99.1332 },
            { name: 'ê³¼ë‹¬ë¼í•˜ë¼', timezone: 'America/Mexico_City', lat: 20.6597, lon: -103.3496 },
            { name: 'ëª¬í…Œë ˆì´', timezone: 'America/Monterrey', lat: 25.6866, lon: -100.3161 },
            { name: 'í‘¸ì—ë¸”ë¼', timezone: 'America/Mexico_City', lat: 19.0414, lon: -98.2063 },
            { name: 'í‹°í›„ì•„ë‚˜', timezone: 'America/Tijuana', lat: 32.5149, lon: -117.0382 },
            { name: 'ê³¼í…Œë§ë¼ì‹œí‹°', timezone: 'America/Guatemala', lat: 14.6349, lon: -90.5069 },
            { name: 'í…Œêµ¬ì‹œê°ˆíŒŒ', timezone: 'America/Tegucigalpa', lat: 14.0723, lon: -87.1921 },
            { name: 'ì‚°ì‚´ë°”ë„ë¥´', timezone: 'America/El_Salvador', lat: 13.6929, lon: -89.2182 },
            { name: 'ë§ˆë‚˜ê³¼', timezone: 'America/Managua', lat: 12.1364, lon: -86.2514 },
            { name: 'ì‚°í˜¸ì„¸', timezone: 'America/Costa_Rica', lat: 9.9281, lon: -84.0907 },
            { name: 'íŒŒë‚˜ë§ˆì‹œí‹°', timezone: 'America/Panama', lat: 8.9824, lon: -79.5199 },
            { name: 'í•˜ë°”ë‚˜', timezone: 'America/Havana', lat: 23.1136, lon: -82.3666 },
            { name: 'í‚¹ìŠ¤í„´', timezone: 'America/Jamaica', lat: 18.0179, lon: -76.8099 },
            { name: 'í¬íŠ¸ì˜¤ë¸ŒìŠ¤í˜ì¸', timezone: 'America/Port_of_Spain', lat: 10.6918, lon: -61.2225 },
            
            // ë‚¨ë¯¸
            { name: 'ìƒíŒŒìš¸ë£¨', timezone: 'America/Sao_Paulo', lat: -23.5505, lon: -46.6333 },
            { name: 'ë¦¬ìš°ë°ìë„¤ì´ë£¨', timezone: 'America/Sao_Paulo', lat: -22.9068, lon: -43.1729 },
            { name: 'ë¸Œë¼ì§ˆë¦¬ì•„', timezone: 'America/Sao_Paulo', lat: -15.7942, lon: -47.8822 },
            { name: 'ë²¨ë£¨ì˜¤ë¦¬ì¡´ì¹˜', timezone: 'America/Sao_Paulo', lat: -19.9167, lon: -43.9345 },
            { name: 'í¬ë¥´íˆ¬ì•Œë ˆê·¸ë¦¬', timezone: 'America/Sao_Paulo', lat: -30.0346, lon: -51.2177 },
            { name: 'ë ˆì‹œí˜', timezone: 'America/Recife', lat: -8.0476, lon: -34.8770 },
            { name: 'í¬ë¥´íƒˆë ˆì', timezone: 'America/Fortaleza', lat: -3.7172, lon: -38.5433 },
            { name: 'ë§ˆë‚˜ìš°ìŠ¤', timezone: 'America/Manaus', lat: -3.1190, lon: -60.0217 },
            { name: 'ë¶€ì—ë…¸ìŠ¤ì•„ì´ë ˆìŠ¤', timezone: 'America/Argentina/Buenos_Aires', lat: -34.6037, lon: -58.3816 },
            { name: 'ì½”ë¥´ë„ë°”', timezone: 'America/Argentina/Cordoba', lat: -31.4201, lon: -64.1888 },
            { name: 'ë¡œì‚¬ë¦¬ì˜¤', timezone: 'America/Argentina/Buenos_Aires', lat: -32.9442, lon: -60.6505 },
            { name: 'ë©˜ë„ì‚¬', timezone: 'America/Argentina/Mendoza', lat: -32.8895, lon: -68.8458 },
            { name: 'ì‚°í‹°ì•„ê³ ', timezone: 'America/Santiago', lat: -33.4489, lon: -70.6693 },
            { name: 'ë°œíŒŒë¼ì´ì†Œ', timezone: 'America/Santiago', lat: -33.0472, lon: -71.6127 },
            { name: 'ë¦¬ë§ˆ', timezone: 'America/Lima', lat: -12.0464, lon: -77.0428 },
            { name: 'ì•„ë ˆí‚¤íŒŒ', timezone: 'America/Lima', lat: -16.4090, lon: -71.5375 },
            { name: 'ë¼íŒŒìŠ¤', timezone: 'America/La_Paz', lat: -16.2902, lon: -68.1332 },
            { name: 'ì‚°íƒ€í¬ë£¨ìŠ¤', timezone: 'America/La_Paz', lat: -17.8146, lon: -63.1561 },
            { name: 'ë³´ê³ íƒ€', timezone: 'America/Bogota', lat: 4.7110, lon: -74.0721 },
            { name: 'ë©”ë°ì¸', timezone: 'America/Bogota', lat: 6.2476, lon: -75.5658 },
            { name: 'ì¹´ë¼ì¹´ìŠ¤', timezone: 'America/Caracas', lat: 10.4806, lon: -66.9036 },
            { name: 'ë§ˆë¼ì¹´ì´ë³´', timezone: 'America/Caracas', lat: 10.6316, lon: -71.6406 },
            { name: 'í‚¤í† ', timezone: 'America/Guayaquil', lat: -0.1807, lon: -78.4678 },
            { name: 'ê³¼ì•¼í‚¬', timezone: 'America/Guayaquil', lat: -2.1709, lon: -79.9224 },
            { name: 'ì•„ìˆœì‹œì˜¨', timezone: 'America/Asuncion', lat: -25.2637, lon: -57.5759 },
            { name: 'ëª¬í…Œë¹„ë°ì˜¤', timezone: 'America/Montevideo', lat: -34.9011, lon: -56.1645 },
            { name: 'ì¡°ì§€íƒ€ìš´', timezone: 'America/Guyana', lat: 6.8013, lon: -58.1551 },
            { name: 'íŒŒë¼ë§ˆë¦¬ë³´', timezone: 'America/Paramaribo', lat: 5.8520, lon: -55.2038 },
            { name: 'ì¹´ì˜Œ', timezone: 'America/Cayenne', lat: 4.9224, lon: -52.3135 },
            
            // ì˜¤ì„¸ì•„ë‹ˆì•„
            { name: 'ì‹œë“œë‹ˆ', timezone: 'Australia/Sydney', lat: -33.8688, lon: 151.2093 },
            { name: 'ë©œë²„ë¥¸', timezone: 'Australia/Melbourne', lat: -37.8136, lon: 144.9631 },
            { name: 'ë¸Œë¦¬ì¦ˆë²ˆ', timezone: 'Australia/Brisbane', lat: -27.4698, lon: 153.0251 },
            { name: 'í¼ìŠ¤', timezone: 'Australia/Perth', lat: -31.9505, lon: 115.8605 },
            { name: 'ì•„ë¸ë ˆì´ë“œ', timezone: 'Australia/Adelaide', lat: -34.9285, lon: 138.6007 },
            { name: 'ìº”ë²„ë¼', timezone: 'Australia/Sydney', lat: -35.2809, lon: 149.1300 },
            { name: 'í˜¸ë°”íŠ¸', timezone: 'Australia/Hobart', lat: -42.8821, lon: 147.3272 },
            { name: 'ë‹¤ìœˆ', timezone: 'Australia/Darwin', lat: -12.4634, lon: 130.8456 },
            { name: 'ì˜¤í´ëœë“œ', timezone: 'Pacific/Auckland', lat: -36.8485, lon: 174.7633 },
            { name: 'ì›°ë§í„´', timezone: 'Pacific/Auckland', lat: -41.2865, lon: 174.7762 },
            { name: 'í¬ë¼ì´ìŠ¤íŠ¸ì²˜ì¹˜', timezone: 'Pacific/Auckland', lat: -43.5321, lon: 172.6362 },
            { name: 'í¬íŠ¸ëª¨ë¥´ì¦ˆë¹„', timezone: 'Pacific/Port_Moresby', lat: -9.4780, lon: 147.1500 },
            { name: 'ìˆ˜ë°”', timezone: 'Pacific/Fiji', lat: -18.1248, lon: 178.4501 },
            { name: 'ëˆ„ë©”ì•„', timezone: 'Pacific/Noumea', lat: -22.2558, lon: 166.4505 },
            { name: 'í˜¸ë†€ë£°ë£¨', timezone: 'Pacific/Honolulu', lat: 21.3099, lon: -157.8581 },
            { name: 'íŒ”ë¦¬í‚¤ë¥´', timezone: 'Pacific/Pohnpei', lat: 6.9170, lon: 158.1850 },
            { name: 'íƒ€ë¼ì™€', timezone: 'Pacific/Tarawa', lat: 1.3291, lon: 172.9790 },
            { name: 'ì•„í”¼ì•„', timezone: 'Pacific/Apia', lat: -13.7590, lon: -172.1046 },
            { name: 'ëˆ„ì¿ ì•Œë¡œíŒŒ', timezone: 'Pacific/Tongatapu', lat: -21.1393, lon: -175.2018 }
        ];

        let selectedCities = [];
        const MAX_CITIES = 8;
        let updateInterval = null;

        // DOM ìš”ì†Œ
        const addButton = document.getElementById('addButton');
        const cityModal = document.getElementById('cityModal');
        const closeModal = document.getElementById('closeModal');
        const citySearch = document.getElementById('citySearch');
        const cityList = document.getElementById('cityList');
        const clocksContainer = document.getElementById('clocksContainer');
        const emptyState = document.getElementById('emptyState');
        const apiKeyInput = document.getElementById('apiKeyInput');

        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
        function loadData() {
            const saved = localStorage.getItem('worldClocks');
            if (saved) {
                selectedCities = JSON.parse(saved);
                renderClocks();
            }
            const savedApiKey = localStorage.getItem('weatherApiKey');
            if (savedApiKey) {
                apiKeyInput.value = savedApiKey;
            }
        }

        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ë°ì´í„° ì €ì¥
        function saveData() {
            localStorage.setItem('worldClocks', JSON.stringify(selectedCities));
        }

        // API í‚¤ ì €ì¥
        apiKeyInput.addEventListener('change', () => {
            localStorage.setItem('weatherApiKey', apiKeyInput.value);
            // ê¸°ì¡´ ì‹œê³„ë“¤ì˜ ë‚ ì”¨ ì •ë³´ ì—…ë°ì´íŠ¸
            selectedCities.forEach((city, index) => {
                if (apiKeyInput.value) {
                    fetchWeather(city, index);
                }
            });
        });

        // ëª¨ë‹¬ ì—´ê¸°
        addButton.addEventListener('click', () => {
            if (selectedCities.length >= MAX_CITIES) {
                alert(`ìµœëŒ€ ${MAX_CITIES}ê°œê¹Œì§€ë§Œ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`);
                return;
            }
            cityModal.classList.add('active');
            renderCityList();
            citySearch.focus();
        });

        // ëª¨ë‹¬ ë‹«ê¸°
        closeModal.addEventListener('click', () => {
            cityModal.classList.remove('active');
            citySearch.value = '';
        });

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        cityModal.addEventListener('click', (e) => {
            if (e.target === cityModal) {
                cityModal.classList.remove('active');
                citySearch.value = '';
            }
        });

        // ë„ì‹œ ê²€ìƒ‰
        citySearch.addEventListener('input', () => {
            renderCityList();
        });

        // ë„ì‹œ ëª©ë¡ ë Œë”ë§
        function renderCityList() {
            const searchTerm = citySearch.value.toLowerCase();
            const filteredCities = cities.filter(city => 
                city.name.toLowerCase().includes(searchTerm)
            );

            cityList.innerHTML = '';

            if (filteredCities.length === 0) {
                cityList.innerHTML = '<div style="text-align: center; padding: 2rem; color: #95a5a6;">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }

            filteredCities.forEach(city => {
                const isSelected = selectedCities.some(sc => sc.name === city.name);
                const cityItem = document.createElement('div');
                cityItem.className = `city-item ${isSelected ? 'disabled' : ''}`;
                cityItem.innerHTML = `
                    <div class="city-name">${city.name}</div>
                    <div class="city-timezone">${city.timezone}</div>
                `;
                
                if (!isSelected) {
                    cityItem.addEventListener('click', () => {
                        addCity(city);
                        cityModal.classList.remove('active');
                        citySearch.value = '';
                    });
                }
                
                cityList.appendChild(cityItem);
            });
        }

        // ë„ì‹œ ì¶”ê°€
        function addCity(city) {
            if (selectedCities.length >= MAX_CITIES) {
                alert(`ìµœëŒ€ ${MAX_CITIES}ê°œê¹Œì§€ë§Œ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`);
                return;
            }

            selectedCities.push({ ...city });
            saveData();
            renderClocks();
            addButton.disabled = selectedCities.length >= MAX_CITIES;
        }

        // ë„ì‹œ ì œê±°
        function removeCity(index) {
            selectedCities.splice(index, 1);
            saveData();
            renderClocks();
            addButton.disabled = selectedCities.length >= MAX_CITIES;
        }

        // ì‹œê³„ ë Œë”ë§
        function renderClocks() {
            clocksContainer.innerHTML = '';

            if (selectedCities.length === 0) {
                clocksContainer.appendChild(emptyState);
                if (updateInterval) {
                    clearInterval(updateInterval);
                    updateInterval = null;
                }
                return;
            }

            selectedCities.forEach((city, index) => {
                const clockCard = document.createElement('div');
                clockCard.className = 'clock-card';
                clockCard.innerHTML = `
                    <div class="clock-header">
                        <div>
                            <div class="clock-city">${city.name}</div>
                            <div class="clock-timezone">${city.timezone}</div>
                        </div>
                        <div style="position: relative;">
                            <button class="menu-button" data-index="${index}" title="ë©”ë‰´">â‹¯</button>
                            <div class="dropdown-menu" id="menu-${index}">
                                <div class="dropdown-item delete" data-action="delete">
                                    <span>ğŸ—‘ï¸</span>
                                    <span>ì‚­ì œ</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="clock-time" id="time-${index}">--:--:--</div>
                    <div class="clock-date" id="date-${index}">--</div>
                    <div class="weather-section" id="weather-${index}">
                        <div class="weather-loading">ë‚ ì”¨ ì •ë³´ ë¡œë”© ì¤‘...</div>
                    </div>
                `;
                const menuBtn = clockCard.querySelector('.menu-button');
                const dropdownMenu = clockCard.querySelector('.dropdown-menu');
                const deleteItem = clockCard.querySelector('.dropdown-item.delete');
                
                // ë©”ë‰´ ë²„íŠ¼ í´ë¦­ ì‹œ ë“œë¡­ë‹¤ìš´ í† ê¸€
                menuBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    // ë‹¤ë¥¸ ë©”ë‰´ ë‹«ê¸°
                    document.querySelectorAll('.dropdown-menu').forEach(menu => {
                        if (menu !== dropdownMenu) {
                            menu.classList.remove('active');
                        }
                    });
                    dropdownMenu.classList.toggle('active');
                });
                
                // ì‚­ì œ í•­ëª© í´ë¦­
                deleteItem.addEventListener('click', (e) => {
                    e.stopPropagation();
                    removeCity(index);
                    dropdownMenu.classList.remove('active');
                });
                
                clocksContainer.appendChild(clockCard);
            });
            
            // ì™¸ë¶€ í´ë¦­ ì‹œ ë©”ë‰´ ë‹«ê¸°
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.menu-button') && !e.target.closest('.dropdown-menu')) {
                    document.querySelectorAll('.dropdown-menu').forEach(menu => {
                        menu.classList.remove('active');
                    });
                }
            });

            updateAllClocks();
            if (!updateInterval) {
                updateInterval = setInterval(updateAllClocks, 1000);
            }

            // ë‚ ì”¨ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
            selectedCities.forEach((city, index) => {
                if (apiKeyInput.value) {
                    fetchWeather(city, index);
                } else {
                    const weatherEl = document.getElementById(`weather-${index}`);
                    weatherEl.innerHTML = '<div class="weather-error">ë‚ ì”¨ API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”</div>';
                }
            });
        }

        // ëª¨ë“  ì‹œê³„ ì—…ë°ì´íŠ¸
        function updateAllClocks() {
            selectedCities.forEach((city, index) => {
                updateClock(city, index);
            });
        }

        // ê°œë³„ ì‹œê³„ ì—…ë°ì´íŠ¸
        function updateClock(city, index) {
            try {
                const now = new Date();
                const timeString = now.toLocaleTimeString('ko-KR', {
                    timeZone: city.timezone,
                    hour12: false,
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                });
                const dateString = now.toLocaleDateString('ko-KR', {
                    timeZone: city.timezone,
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    weekday: 'long'
                });

                const timeEl = document.getElementById(`time-${index}`);
                const dateEl = document.getElementById(`date-${index}`);
                
                if (timeEl) timeEl.textContent = timeString;
                if (dateEl) dateEl.textContent = dateString;
            } catch (error) {
                console.error(`ì‹œê³„ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜ (${city.name}):`, error);
            }
        }

        // ë‚ ì”¨ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        async function fetchWeather(city, index) {
            const apiKey = apiKeyInput.value;
            if (!apiKey) return;

            const weatherEl = document.getElementById(`weather-${index}`);
            if (!weatherEl) return;

            try {
                weatherEl.innerHTML = '<div class="weather-loading">ë‚ ì”¨ ì •ë³´ ë¡œë”© ì¤‘...</div>';
                
                const response = await fetch(
                    `https://api.openweathermap.org/data/2.5/weather?lat=${city.lat}&lon=${city.lon}&appid=${apiKey}&units=metric&lang=kr`
                );

                if (!response.ok) {
                    throw new Error('ë‚ ì”¨ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }

                const data = await response.json();
                
                const weatherIcon = getWeatherIcon(data.weather[0].main);
                weatherEl.innerHTML = `
                    <div class="weather-info">
                        <div class="weather-icon">${weatherIcon}</div>
                        <div class="weather-details">
                            <div class="weather-temp">${Math.round(data.main.temp)}Â°C</div>
                            <div class="weather-desc">${data.weather[0].description}</div>
                        </div>
                    </div>
                `;
            } catch (error) {
                console.error('ë‚ ì”¨ ì •ë³´ ì˜¤ë¥˜:', error);
                weatherEl.innerHTML = '<div class="weather-error">ë‚ ì”¨ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</div>';
            }
        }

        // ë‚ ì”¨ ì•„ì´ì½˜ ë§¤í•‘
        function getWeatherIcon(weatherMain) {
            const iconMap = {
                'Clear': 'â˜€ï¸',
                'Clouds': 'â˜ï¸',
                'Rain': 'ğŸŒ§ï¸',
                'Drizzle': 'ğŸŒ¦ï¸',
                'Thunderstorm': 'â›ˆï¸',
                'Snow': 'â„ï¸',
                'Mist': 'ğŸŒ«ï¸',
                'Fog': 'ğŸŒ«ï¸',
                'Haze': 'ğŸŒ«ï¸'
            };
            return iconMap[weatherMain] || 'ğŸŒ¤ï¸';
        }

        // ì´ˆê¸°í™”
        loadData();
        addButton.disabled = selectedCities.length >= MAX_CITIES;
    </script>
</body>
</html>
