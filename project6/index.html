<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ï†ÑÏÑ∏Í≥Ñ ÏãúÍ≥Ñ</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --background-color: #f5f6fa;
            --text-color: #2c3e50;
            --card-background: #ffffff;
            --hover-shadow: 0 8px 25px rgba(52, 152, 219, 0.15);
            --danger-color: #e74c3c;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background: linear-gradient(135deg, #f5f6fa 0%, #e9ecef 100%);
            min-height: 100vh;
            padding: 1rem;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 1rem 0;
        }

        h1 {
            color: var(--primary-color);
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .description {
            color: var(--text-color);
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            max-width: 600px;
            margin: 0 auto;
            opacity: 0.8;
        }

        .controls {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .add-button {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
        }

        .add-button:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
        }

        .add-button:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
        }

        .api-key-section {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .api-key-input {
            padding: 0.5rem 1rem;
            border: 1px solid #ddd;
            border-radius: 20px;
            font-size: 0.9rem;
            width: 200px;
        }

        .api-key-label {
            font-size: 0.9rem;
            color: var(--text-color);
            opacity: 0.7;
        }

        .clocks-container {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            justify-content: center;
        }

        .clock-card {
            background: var(--card-background);
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(52, 152, 219, 0.1);
            position: relative;
            min-width: 280px;
            flex: 1 1 300px;
            max-width: 350px;
        }

        .clock-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
        }

        .clock-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .clock-city {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .clock-timezone {
            font-size: 0.85rem;
            color: #7f8c8d;
            margin-top: 0.25rem;
        }

        .menu-button {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #95a5a6;
            padding: 0.25rem;
            line-height: 1;
            transition: all 0.2s ease;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            position: relative;
        }

        .menu-button:hover {
            color: var(--primary-color);
            background: rgba(44, 62, 80, 0.1);
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--card-background);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            min-width: 120px;
            padding: 0.5rem 0;
            margin-top: 0.25rem;
            display: none;
            z-index: 100;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .dropdown-menu.active {
            display: block;
        }

        .dropdown-item {
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-color);
            font-size: 0.9rem;
        }

        .dropdown-item:hover {
            background: rgba(231, 76, 60, 0.1);
            color: var(--danger-color);
        }

        .dropdown-item.delete {
            color: var(--danger-color);
        }

        .clock-time {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--secondary-color);
            margin: 1rem 0;
            font-variant-numeric: tabular-nums;
        }

        .clock-date {
            font-size: 1rem;
            color: var(--text-color);
            opacity: 0.7;
            margin-bottom: 1rem;
        }

        .weather-section {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        .weather-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .weather-icon {
            font-size: 2rem;
        }

        .weather-details {
            flex: 1;
        }

        .weather-temp {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .weather-desc {
            font-size: 0.9rem;
            color: #7f8c8d;
        }

        .weather-loading {
            color: #95a5a6;
            font-size: 0.9rem;
        }

        .weather-error {
            color: var(--danger-color);
            font-size: 0.9rem;
        }

        /* Î™®Îã¨ Ïä§ÌÉÄÏùº */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--card-background);
            border-radius: 15px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #95a5a6;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            color: var(--danger-color);
            background: rgba(231, 76, 60, 0.1);
        }

        .city-search {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            margin-bottom: 1rem;
        }

        .city-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .city-item {
            padding: 0.75rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0.5rem;
        }

        .city-item:hover {
            background: rgba(52, 152, 219, 0.1);
        }

        .city-item.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .city-name {
            font-weight: 500;
            color: var(--primary-color);
        }

        .city-timezone {
            font-size: 0.85rem;
            color: #7f8c8d;
            margin-top: 0.25rem;
        }

        .empty-state {
            text-align: center;
            padding: 3rem;
            color: #95a5a6;
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .empty-state-text {
            font-size: 1.1rem;
        }

        /* Î™®Î∞îÏùº ÏµúÏ†ÅÌôî */
        @media (max-width: 768px) {
            .clocks-container {
                gap: 1rem;
            }

            .clock-card {
                min-width: 100%;
                max-width: 100%;
            }

            .controls {
                flex-direction: column;
                align-items: stretch;
            }

            .api-key-section {
                flex-direction: column;
                align-items: stretch;
            }

            .api-key-input {
                width: 100%;
            }

            .modal-content {
                padding: 1.5rem;
            }
        }

        /* Îã§ÌÅ¨Î™®Îìú ÏßÄÏõê */
        @media (prefers-color-scheme: dark) {
            :root {
                --primary-color: #3498db;
                --secondary-color: #e74c3c;
                --background-color: #1a1a1a;
                --text-color: #ffffff;
                --card-background: #2c2c2c;
            }

            body {
                background: linear-gradient(135deg, #1a1a1a 0%, #2c2c2c 100%);
            }

            .city-search {
                background: #1a1a1a;
                border-color: #444;
                color: var(--text-color);
            }

            .api-key-input {
                background: #1a1a1a;
                border-color: #444;
                color: var(--text-color);
            }

            .weather-section {
                border-top-color: #444;
            }

            .dropdown-menu {
                background: #2c2c2c;
                border-color: #444;
            }

            .dropdown-item {
                color: var(--text-color);
            }

            .dropdown-item:hover {
                background: rgba(231, 76, 60, 0.2);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Ï†ÑÏÑ∏Í≥Ñ ÏãúÍ≥Ñ</h1>
            <p class="description">ÏõêÌïòÎäî ÎèÑÏãúÎ•º Ï∂îÍ∞ÄÌïòÏó¨ Ï†ÑÏÑ∏Í≥Ñ Ïó¨Îü¨ ÏßÄÏó≠Ïùò ÌòÑÏû¨ ÏãúÍ∞ÑÏùÑ Ìïú Î≤àÏóê ÌôïÏù∏ÌïòÏÑ∏Ïöî.</p>
        </header>

        <div class="controls">
            <button class="add-button" id="addButton">
                <span>+</span>
                <span>ÎèÑÏãú Ï∂îÍ∞Ä</span>
            </button>
            <div class="api-key-section">
                <label class="api-key-label" for="apiKeyInput">ÎÇ†Ïî® API ÌÇ§:</label>
                <input type="text" class="api-key-input" id="apiKeyInput" placeholder="OpenWeatherMap API ÌÇ§ (ÏÑ†ÌÉùÏÇ¨Ìï≠)">
            </div>
        </div>

        <div class="clocks-container" id="clocksContainer">
            <div class="empty-state" id="emptyState">
                <div class="empty-state-icon">üïê</div>
                <div class="empty-state-text">ÎèÑÏãúÎ•º Ï∂îÍ∞ÄÌïòÏó¨ ÏãúÍ≥ÑÎ•º ÏãúÏûëÌïòÏÑ∏Ïöî</div>
            </div>
        </div>
    </div>

    <!-- ÎèÑÏãú ÏÑ†ÌÉù Î™®Îã¨ -->
    <div class="modal" id="cityModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">ÎèÑÏãú ÏÑ†ÌÉù</h2>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
            <input type="text" class="city-search" id="citySearch" placeholder="ÎèÑÏãú Í≤ÄÏÉâ...">
            <div class="city-list" id="cityList"></div>
        </div>
    </div>

    <script>
        // Ï†ÑÏÑ∏Í≥Ñ Ï£ºÏöî ÎèÑÏãú Î™©Î°ù (ÎèÑÏãúÎ™Ö, ÌÉÄÏûÑÏ°¥, ÏúÑÎèÑ, Í≤ΩÎèÑ)
        const cities = [
            // ÏïÑÏãúÏïÑ - ÎèôÏïÑÏãúÏïÑ
            { name: 'ÏÑúÏö∏', timezone: 'Asia/Seoul', lat: 37.5665, lon: 126.9780 },
            { name: 'Î∂ÄÏÇ∞', timezone: 'Asia/Seoul', lat: 35.1796, lon: 129.0756 },
            { name: 'ÎèÑÏøÑ', timezone: 'Asia/Tokyo', lat: 35.6762, lon: 139.6503 },
            { name: 'Ïò§ÏÇ¨Ïπ¥', timezone: 'Asia/Tokyo', lat: 34.6937, lon: 135.5023 },
            { name: 'Î≤†Ïù¥Ïßï', timezone: 'Asia/Shanghai', lat: 39.9042, lon: 116.4074 },
            { name: 'ÏÉÅÌïòÏù¥', timezone: 'Asia/Shanghai', lat: 31.2304, lon: 121.4737 },
            { name: 'Í¥ëÏ†ÄÏö∞', timezone: 'Asia/Shanghai', lat: 23.1291, lon: 113.2644 },
            { name: 'ÌôçÏΩ©', timezone: 'Asia/Hong_Kong', lat: 22.3193, lon: 114.1694 },
            { name: 'ÌÉÄÏù¥Î≤†Ïù¥', timezone: 'Asia/Taipei', lat: 25.0330, lon: 121.5654 },
            { name: 'ÎßàÎãêÎùº', timezone: 'Asia/Manila', lat: 14.5995, lon: 120.9842 },
            { name: 'Î∞©ÏΩï', timezone: 'Asia/Bangkok', lat: 13.7563, lon: 100.5018 },
            { name: 'ÌïòÎÖ∏Ïù¥', timezone: 'Asia/Ho_Chi_Minh', lat: 21.0285, lon: 105.8542 },
            { name: 'Ìò∏ÏπòÎØº', timezone: 'Asia/Ho_Chi_Minh', lat: 10.8231, lon: 106.6297 },
            { name: 'Ïø†ÏïåÎùºÎ£∏Ìë∏Î•¥', timezone: 'Asia/Kuala_Lumpur', lat: 3.1390, lon: 101.6869 },
            { name: 'Ïã±Í∞ÄÌè¨Î•¥', timezone: 'Asia/Singapore', lat: 1.3521, lon: 103.8198 },
            { name: 'ÏûêÏπ¥Î•¥ÌÉÄ', timezone: 'Asia/Jakarta', lat: -6.2088, lon: 106.8456 },
            { name: 'Î∞òÎã§Î•¥Ïä§Î¶¨Î∏åÍ∞ÄÏôÑ', timezone: 'Asia/Brunei', lat: 4.9031, lon: 114.9398 },
            
            // ÏïÑÏãúÏïÑ - ÎÇ®ÏïÑÏãúÏïÑ
            { name: 'Îâ¥Îç∏Î¶¨', timezone: 'Asia/Kolkata', lat: 28.6139, lon: 77.2090 },
            { name: 'Î≠ÑÎ∞îÏù¥', timezone: 'Asia/Kolkata', lat: 19.0760, lon: 72.8777 },
            { name: 'Î∞©Í∞àÎ°úÎ•¥', timezone: 'Asia/Kolkata', lat: 12.9716, lon: 77.5946 },
            { name: 'ÏΩúÏπ¥ÌÉÄ', timezone: 'Asia/Kolkata', lat: 22.5726, lon: 88.3639 },
            { name: 'Ï≤¥ÎÇòÏù¥', timezone: 'Asia/Kolkata', lat: 13.0827, lon: 80.2707 },
            { name: 'Ïπ¥ÎùºÏπò', timezone: 'Asia/Karachi', lat: 24.8607, lon: 67.0011 },
            { name: 'ÎùºÌò∏Î•¥', timezone: 'Asia/Karachi', lat: 31.5204, lon: 74.3587 },
            { name: 'Ïù¥Ïä¨ÎùºÎßàÎ∞îÎìú', timezone: 'Asia/Karachi', lat: 33.6844, lon: 73.0479 },
            { name: 'Îã§Ïπ¥', timezone: 'Asia/Dhaka', lat: 23.8103, lon: 90.4125 },
            { name: 'ÏΩúÎ°¨Î≥¥', timezone: 'Asia/Colombo', lat: 6.9271, lon: 79.8612 },
            { name: 'Ïπ¥Ìä∏ÎßåÎëê', timezone: 'Asia/Kathmandu', lat: 27.7172, lon: 85.3240 },
            
            // ÏïÑÏãúÏïÑ - Ï§ëÎèô
            { name: 'ÎëêÎ∞îÏù¥', timezone: 'Asia/Dubai', lat: 25.2048, lon: 55.2708 },
            { name: 'ÏïÑÎ∂ÄÎã§ÎπÑ', timezone: 'Asia/Dubai', lat: 24.4539, lon: 54.3773 },
            { name: 'Î¶¨ÏïºÎìú', timezone: 'Asia/Riyadh', lat: 24.7136, lon: 46.6753 },
            { name: 'Ï†úÎã§', timezone: 'Asia/Riyadh', lat: 21.4858, lon: 39.1925 },
            { name: 'ÌÖîÏïÑÎπÑÎ∏å', timezone: 'Asia/Jerusalem', lat: 32.0853, lon: 34.7818 },
            { name: 'ÏòàÎ£®ÏÇ¥Î†ò', timezone: 'Asia/Jerusalem', lat: 31.7683, lon: 35.2137 },
            { name: 'Î≤†Ïù¥Î£®Ìä∏', timezone: 'Asia/Beirut', lat: 33.8938, lon: 35.5018 },
            { name: 'ÏïîÎßå', timezone: 'Asia/Amman', lat: 31.9539, lon: 35.9106 },
            { name: 'Î∞îÍ∑∏Îã§Îìú', timezone: 'Asia/Baghdad', lat: 33.3152, lon: 44.3661 },
            { name: 'ÌÖåÌó§ÎûÄ', timezone: 'Asia/Tehran', lat: 35.6892, lon: 51.3890 },
            { name: 'Ïø†Ïõ®Ïù¥Ìä∏ÏãúÌã∞', timezone: 'Asia/Kuwait', lat: 29.3759, lon: 47.9774 },
            { name: 'ÎèÑÌïò', timezone: 'Asia/Qatar', lat: 25.2854, lon: 51.5310 },
            { name: 'ÎßàÎÇòÎßà', timezone: 'Asia/Bahrain', lat: 26.0667, lon: 50.5577 },
            { name: 'Î¨¥Ïä§Ïπ¥Ìä∏', timezone: 'Asia/Muscat', lat: 23.5859, lon: 58.4059 },
            
            // ÏïÑÏãúÏïÑ - Ï§ëÏïôÏïÑÏãúÏïÑ
            { name: 'ÏïåÎßàÌã∞', timezone: 'Asia/Almaty', lat: 43.2220, lon: 76.8512 },
            { name: 'ÌÉÄÏäàÏºÑÌä∏', timezone: 'Asia/Tashkent', lat: 41.2995, lon: 69.2401 },
            { name: 'ÎπÑÏäàÏºÄÌÅ¨', timezone: 'Asia/Bishkek', lat: 42.8746, lon: 74.5698 },
            
            // Ïú†ÎüΩ - ÏÑúÏú†ÎüΩ
            { name: 'Îü∞Îçò', timezone: 'Europe/London', lat: 51.5074, lon: -0.1278 },
            { name: 'ÌååÎ¶¨', timezone: 'Europe/Paris', lat: 48.8566, lon: 2.3522 },
            { name: 'ÏïîÏä§ÌÖåÎ•¥Îã¥', timezone: 'Europe/Amsterdam', lat: 52.3676, lon: 4.9041 },
            { name: 'Î∏åÎ§ºÏÖÄ', timezone: 'Europe/Brussels', lat: 50.8503, lon: 4.3517 },
            { name: 'Î£©ÏÖàÎ∂ÄÎ•¥ÌÅ¨', timezone: 'Europe/Luxembourg', lat: 49.6116, lon: 6.1319 },
            { name: 'Ï∑®Î¶¨Ìûà', timezone: 'Europe/Zurich', lat: 47.3769, lon: 8.5417 },
            { name: 'Ï†úÎÑ§Î∞î', timezone: 'Europe/Zurich', lat: 46.2044, lon: 6.1432 },
            { name: 'Îπà', timezone: 'Europe/Vienna', lat: 48.2082, lon: 16.3738 },
            { name: 'Î≤†Î•ºÎ¶∞', timezone: 'Europe/Berlin', lat: 52.5200, lon: 13.4050 },
            { name: 'ÎÆåÌó®', timezone: 'Europe/Berlin', lat: 48.1351, lon: 11.5820 },
            { name: 'Ìï®Î∂ÄÎ•¥ÌÅ¨', timezone: 'Europe/Berlin', lat: 53.5511, lon: 9.9937 },
            { name: 'ÌîÑÎûëÌÅ¨Ìë∏Î•¥Ìä∏', timezone: 'Europe/Berlin', lat: 50.1109, lon: 8.6821 },
            { name: 'ÏΩîÌéúÌïòÍ≤ê', timezone: 'Europe/Copenhagen', lat: 55.6761, lon: 12.5683 },
            { name: 'Ïä§ÌÜ°ÌôÄÎ¶Ñ', timezone: 'Europe/Stockholm', lat: 59.3293, lon: 18.0686 },
            { name: 'Ïò§Ïä¨Î°ú', timezone: 'Europe/Oslo', lat: 59.9139, lon: 10.7522 },
            { name: 'Ìó¨Ïã±ÌÇ§', timezone: 'Europe/Helsinki', lat: 60.1699, lon: 24.9384 },
            
            // Ïú†ÎüΩ - ÎÇ®Ïú†ÎüΩ
            { name: 'ÎßàÎìúÎ¶¨Îìú', timezone: 'Europe/Madrid', lat: 40.4168, lon: -3.7038 },
            { name: 'Î∞îÎ•¥ÏÖÄÎ°úÎÇò', timezone: 'Europe/Madrid', lat: 41.3851, lon: 2.1734 },
            { name: 'Î°úÎßà', timezone: 'Europe/Rome', lat: 41.9028, lon: 12.4964 },
            { name: 'Î∞ÄÎùºÎÖ∏', timezone: 'Europe/Rome', lat: 45.4642, lon: 9.1900 },
            { name: 'Î¶¨Ïä§Î≥∏', timezone: 'Europe/Lisbon', lat: 38.7223, lon: -9.1393 },
            { name: 'ÏïÑÌÖåÎÑ§', timezone: 'Europe/Athens', lat: 37.9838, lon: 23.7275 },
            { name: 'Ïù¥Ïä§ÌÉÑÎ∂à', timezone: 'Europe/Istanbul', lat: 41.0082, lon: 28.9784 },
            { name: 'ÏïàÏπ¥Îùº', timezone: 'Europe/Istanbul', lat: 39.9334, lon: 32.8597 },
            
            // Ïú†ÎüΩ - ÎèôÏú†ÎüΩ
            { name: 'Î™®Ïä§ÌÅ¨Î∞î', timezone: 'Europe/Moscow', lat: 55.7558, lon: 37.6173 },
            { name: 'ÏÉÅÌä∏ÌéòÌÖåÎ•¥Î∂ÄÎ•¥ÌÅ¨', timezone: 'Europe/Moscow', lat: 59.9343, lon: 30.3351 },
            { name: 'ÌÇ§ÏòàÌîÑ', timezone: 'Europe/Kiev', lat: 50.4501, lon: 30.5234 },
            { name: 'Î∞îÎ•¥ÏÉ§Î∞î', timezone: 'Europe/Warsaw', lat: 52.2297, lon: 21.0122 },
            { name: 'ÌîÑÎùºÌïò', timezone: 'Europe/Prague', lat: 50.0755, lon: 14.4378 },
            { name: 'Î∂ÄÎã§ÌéòÏä§Ìä∏', timezone: 'Europe/Budapest', lat: 47.4979, lon: 19.0402 },
            { name: 'Î∂ÄÏø†Î†àÏäàÌã∞', timezone: 'Europe/Bucharest', lat: 44.4268, lon: 26.1025 },
            { name: 'ÏÜåÌîºÏïÑ', timezone: 'Europe/Sofia', lat: 42.6977, lon: 23.3219 },
            { name: 'Î≤†Ïò§Í∑∏ÎùºÎìú', timezone: 'Europe/Belgrade', lat: 44.7866, lon: 20.4489 },
            { name: 'ÏûêÍ∑∏Î†àÎ∏å', timezone: 'Europe/Zagreb', lat: 45.8150, lon: 15.9819 },
            
            // ÏïÑÌîÑÎ¶¨Ïπ¥
            { name: 'Ïπ¥Ïù¥Î°ú', timezone: 'Africa/Cairo', lat: 30.0444, lon: 31.2357 },
            { name: 'ÏïåÎ†âÏÇ∞ÎìúÎ¶¨ÏïÑ', timezone: 'Africa/Cairo', lat: 31.2001, lon: 29.9187 },
            { name: 'Ïπ¥ÏÇ¨Î∏îÎûëÏπ¥', timezone: 'Africa/Casablanca', lat: 33.5731, lon: -7.5898 },
            { name: 'ÎùºÎ∞îÌä∏', timezone: 'Africa/Casablanca', lat: 34.0209, lon: -6.8416 },
            { name: 'ÌäÄÎãàÏä§', timezone: 'Africa/Tunis', lat: 36.8065, lon: 10.1815 },
            { name: 'ÏïåÏ†ú', timezone: 'Africa/Algiers', lat: 36.7538, lon: 3.0588 },
            { name: 'ÎùºÍ≥†Ïä§', timezone: 'Africa/Lagos', lat: 6.5244, lon: 3.3792 },
            { name: 'ÏïÑÎπÑÏûî', timezone: 'Africa/Abidjan', lat: 5.3600, lon: -4.0083 },
            { name: 'ÏïÑÌÅ¨Îùº', timezone: 'Africa/Accra', lat: 5.6037, lon: -0.1870 },
            { name: 'ÎÇòÏù¥Î°úÎπÑ', timezone: 'Africa/Nairobi', lat: -1.2921, lon: 36.8219 },
            { name: 'Îã§Î•¥ÏóêÏä§ÏÇ¥Îûå', timezone: 'Africa/Dar_es_Salaam', lat: -6.7924, lon: 39.2083 },
            { name: 'ÏïÑÎîîÏä§ÏïÑÎ∞îÎ∞î', timezone: 'Africa/Addis_Ababa', lat: 9.1450, lon: 38.7667 },
            { name: 'ÏöîÌïòÎÑ§Ïä§Î≤ÑÍ∑∏', timezone: 'Africa/Johannesburg', lat: -26.2041, lon: 28.0473 },
            { name: 'ÏºÄÏù¥ÌîÑÌÉÄÏö¥', timezone: 'Africa/Johannesburg', lat: -33.9249, lon: 18.4241 },
            { name: 'ÎçîÎ∞ò', timezone: 'Africa/Johannesburg', lat: -29.8587, lon: 31.0218 },
            
            // Î∂ÅÎØ∏ - ÎØ∏Íµ≠
            { name: 'Îâ¥Ïöï', timezone: 'America/New_York', lat: 40.7128, lon: -74.0060 },
            { name: 'Î°úÏä§Ïï§Ï†§Î†àÏä§', timezone: 'America/Los_Angeles', lat: 34.0522, lon: -118.2437 },
            { name: 'ÏãúÏπ¥Í≥†', timezone: 'America/Chicago', lat: 41.8781, lon: -87.6298 },
            { name: 'Ìú¥Ïä§ÌÑ¥', timezone: 'America/Chicago', lat: 29.7604, lon: -95.3698 },
            { name: 'ÌîºÎãâÏä§', timezone: 'America/Phoenix', lat: 33.4484, lon: -112.0740 },
            { name: 'ÌïÑÎùºÎç∏ÌîºÏïÑ', timezone: 'America/New_York', lat: 39.9526, lon: -75.1652 },
            { name: 'ÏÉåÏïàÌÜ†ÎãàÏò§', timezone: 'America/Chicago', lat: 29.4241, lon: -98.4936 },
            { name: 'ÏÉåÎîîÏóêÏù¥Í≥†', timezone: 'America/Los_Angeles', lat: 32.7157, lon: -117.1611 },
            { name: 'ÎåàÎü¨Ïä§', timezone: 'America/Chicago', lat: 32.7767, lon: -96.7970 },
            { name: 'ÏÇ∞Ìò∏ÏÑ∏', timezone: 'America/Los_Angeles', lat: 37.3382, lon: -121.8863 },
            { name: 'Ïò§Ïä§Ìã¥', timezone: 'America/Chicago', lat: 30.2672, lon: -97.7431 },
            { name: 'Ïû≠Ïä®Îπå', timezone: 'America/New_York', lat: 30.3322, lon: -81.6557 },
            { name: 'ÏÉåÌîÑÎûÄÏãúÏä§ÏΩî', timezone: 'America/Los_Angeles', lat: 37.7749, lon: -122.4194 },
            { name: 'Ïù∏ÎîîÏï†ÎÇòÌè¥Î¶¨Ïä§', timezone: 'America/Indiana/Indianapolis', lat: 39.7684, lon: -86.1581 },
            { name: 'ÏΩúÎüºÎ≤ÑÏä§', timezone: 'America/New_York', lat: 39.9612, lon: -82.9988 },
            { name: 'Ìè¨Ìä∏ÏõåÏä§', timezone: 'America/Chicago', lat: 32.7555, lon: -97.3308 },
            { name: 'ÏÉ¨Îüø', timezone: 'America/New_York', lat: 35.2271, lon: -80.8431 },
            { name: 'ÏãúÏï†ÌãÄ', timezone: 'America/Los_Angeles', lat: 47.6062, lon: -122.3321 },
            { name: 'Îç¥Î≤Ñ', timezone: 'America/Denver', lat: 39.7392, lon: -104.9903 },
            { name: 'ÏõåÏã±ÌÑ¥', timezone: 'America/New_York', lat: 38.9072, lon: -77.0369 },
            { name: 'Î≥¥Ïä§ÌÑ¥', timezone: 'America/New_York', lat: 42.3601, lon: -71.0589 },
            { name: 'ÏóòÌååÏÜå', timezone: 'America/Denver', lat: 31.7619, lon: -106.4850 },
            { name: 'ÎîîÌä∏Î°úÏù¥Ìä∏', timezone: 'America/Detroit', lat: 42.3314, lon: -83.0458 },
            { name: 'ÎÇ¥ÏäàÎπå', timezone: 'America/Chicago', lat: 36.1627, lon: -86.7816 },
            { name: 'Î©§ÌîºÏä§', timezone: 'America/Chicago', lat: 35.1495, lon: -90.0490 },
            { name: 'Ìè¨Ìä∏ÎûúÎìú', timezone: 'America/Los_Angeles', lat: 45.5152, lon: -122.6784 },
            { name: 'Ïò§ÌÅ¥ÎùºÌò∏ÎßàÏãúÌã∞', timezone: 'America/Chicago', lat: 35.4676, lon: -97.5164 },
            { name: 'ÎùºÏä§Î≤†Ïù¥Í±∞Ïä§', timezone: 'America/Los_Angeles', lat: 36.1699, lon: -115.1398 },
            { name: 'Î£®Ïù¥Îπå', timezone: 'America/New_York', lat: 38.2527, lon: -85.7585 },
            { name: 'Î≥ºÌã∞Î™®Ïñ¥', timezone: 'America/New_York', lat: 39.2904, lon: -76.6122 },
            { name: 'Î∞ÄÏõåÌÇ§', timezone: 'America/Chicago', lat: 43.0389, lon: -87.9065 },
            { name: 'ÏïåÎ∂ÄÏª§ÌÇ§', timezone: 'America/Denver', lat: 35.0844, lon: -106.6504 },
            { name: 'Ìà¨ÏÜê', timezone: 'America/Phoenix', lat: 32.2226, lon: -110.9747 },
            { name: 'ÌîÑÎ†àÏ¶àÎÖ∏', timezone: 'America/Los_Angeles', lat: 36.7378, lon: -119.7871 },
            { name: 'ÏÉàÌÅ¨ÎùºÎ©òÌÜ†', timezone: 'America/Los_Angeles', lat: 38.5816, lon: -121.4944 },
            { name: 'Î°±ÎπÑÏπò', timezone: 'America/Los_Angeles', lat: 33.7701, lon: -118.1937 },
            { name: 'Ï∫îÏûêÏä§ÏãúÌã∞', timezone: 'America/Chicago', lat: 39.0997, lon: -94.5786 },
            { name: 'Î©îÏÇ¨', timezone: 'America/Phoenix', lat: 33.4152, lon: -111.8315 },
            { name: 'Ïï†ÌãÄÎûúÌÉÄ', timezone: 'America/New_York', lat: 33.7490, lon: -84.3880 },
            { name: 'ÏΩúÎ°úÎùºÎèÑÏä§ÌîÑÎßÅÏä§', timezone: 'America/Denver', lat: 38.8339, lon: -104.8214 },
            { name: 'Î°§Î¶¨', timezone: 'America/New_York', lat: 35.7796, lon: -78.6382 },
            { name: 'Ïò§ÎßàÌïò', timezone: 'America/Chicago', lat: 41.2565, lon: -95.9345 },
            { name: 'ÎßàÏù¥Ïï†ÎØ∏', timezone: 'America/New_York', lat: 25.7617, lon: -80.1918 },
            { name: 'Ïò§ÌÅ¥ÎûúÎìú', timezone: 'America/Los_Angeles', lat: 37.8044, lon: -122.2712 },
            { name: 'ÎØ∏ÎãàÏï†Ìè¥Î¶¨Ïä§', timezone: 'America/Chicago', lat: 44.9778, lon: -93.2650 },
            { name: 'ÌÑ∏ÏÇ¨', timezone: 'America/Chicago', lat: 36.1540, lon: -95.9928 },
            { name: 'ÌÅ¥Î¶¨Î∏îÎûúÎìú', timezone: 'America/New_York', lat: 41.4993, lon: -81.6944 },
            { name: 'ÏúÑÏπòÌÉÄ', timezone: 'America/Chicago', lat: 37.6872, lon: -97.3301 },
            { name: 'ÏïÑÎ•ºÎßÅÌÑ¥', timezone: 'America/Chicago', lat: 32.7357, lon: -97.1081 },
            
            // Î∂ÅÎØ∏ - Ï∫êÎÇòÎã§
            { name: 'ÌÜ†Î°†ÌÜ†', timezone: 'America/Toronto', lat: 43.6532, lon: -79.3832 },
            { name: 'Î∞¥Ïø†Î≤Ñ', timezone: 'America/Vancouver', lat: 49.2827, lon: -123.1207 },
            { name: 'Î™¨Ìä∏Î¶¨Ïò¨', timezone: 'America/Toronto', lat: 45.5017, lon: -73.5673 },
            { name: 'Ï∫òÍ±∞Î¶¨', timezone: 'America/Edmonton', lat: 51.0447, lon: -114.0719 },
            { name: 'Ïò§ÌÉÄÏôÄ', timezone: 'America/Toronto', lat: 45.4215, lon: -75.6972 },
            { name: 'ÏóêÎìúÎ®ºÌÑ¥', timezone: 'America/Edmonton', lat: 53.5461, lon: -113.4938 },
            { name: 'ÏúÑÎãàÌéô', timezone: 'America/Winnipeg', lat: 49.8951, lon: -97.1384 },
            { name: 'ÌÄòÎ≤°', timezone: 'America/Toronto', lat: 46.8139, lon: -71.2080 },
            { name: 'ÌïºÎ¶¨Ìå©Ïä§', timezone: 'America/Halifax', lat: 44.6488, lon: -63.5752 },
            
            // Î∂ÅÎØ∏ - Î©ïÏãúÏΩî Î∞è Ï§ëÎØ∏
            { name: 'Î©ïÏãúÏΩîÏãúÌã∞', timezone: 'America/Mexico_City', lat: 19.4326, lon: -99.1332 },
            { name: 'Í≥ºÎã¨ÎùºÌïòÎùº', timezone: 'America/Mexico_City', lat: 20.6597, lon: -103.3496 },
            { name: 'Î™¨ÌÖåÎ†àÏù¥', timezone: 'America/Monterrey', lat: 25.6866, lon: -100.3161 },
            { name: 'Ìë∏ÏóêÎ∏îÎùº', timezone: 'America/Mexico_City', lat: 19.0414, lon: -98.2063 },
            { name: 'Ìã∞ÌõÑÏïÑÎÇò', timezone: 'America/Tijuana', lat: 32.5149, lon: -117.0382 },
            { name: 'Í≥ºÌÖåÎßêÎùºÏãúÌã∞', timezone: 'America/Guatemala', lat: 14.6349, lon: -90.5069 },
            { name: 'ÌÖåÍµ¨ÏãúÍ∞àÌåå', timezone: 'America/Tegucigalpa', lat: 14.0723, lon: -87.1921 },
            { name: 'ÏÇ∞ÏÇ¥Î∞îÎèÑÎ•¥', timezone: 'America/El_Salvador', lat: 13.6929, lon: -89.2182 },
            { name: 'ÎßàÎÇòÍ≥º', timezone: 'America/Managua', lat: 12.1364, lon: -86.2514 },
            { name: 'ÏÇ∞Ìò∏ÏÑ∏', timezone: 'America/Costa_Rica', lat: 9.9281, lon: -84.0907 },
            { name: 'ÌååÎÇòÎßàÏãúÌã∞', timezone: 'America/Panama', lat: 8.9824, lon: -79.5199 },
            { name: 'ÌïòÎ∞îÎÇò', timezone: 'America/Havana', lat: 23.1136, lon: -82.3666 },
            { name: 'ÌÇπÏä§ÌÑ¥', timezone: 'America/Jamaica', lat: 18.0179, lon: -76.8099 },
            { name: 'Ìè¨Ìä∏Ïò§Î∏åÏä§ÌéòÏù∏', timezone: 'America/Port_of_Spain', lat: 10.6918, lon: -61.2225 },
            
            // ÎÇ®ÎØ∏
            { name: 'ÏÉÅÌååÏö∏Î£®', timezone: 'America/Sao_Paulo', lat: -23.5505, lon: -46.6333 },
            { name: 'Î¶¨Ïö∞Îç∞ÏûêÎÑ§Ïù¥Î£®', timezone: 'America/Sao_Paulo', lat: -22.9068, lon: -43.1729 },
            { name: 'Î∏åÎùºÏßàÎ¶¨ÏïÑ', timezone: 'America/Sao_Paulo', lat: -15.7942, lon: -47.8822 },
            { name: 'Î≤®Î£®Ïò§Î¶¨Ï°¥Ïπò', timezone: 'America/Sao_Paulo', lat: -19.9167, lon: -43.9345 },
            { name: 'Ìè¨Î•¥Ìà¨ÏïåÎ†àÍ∑∏Î¶¨', timezone: 'America/Sao_Paulo', lat: -30.0346, lon: -51.2177 },
            { name: 'Î†àÏãúÌéò', timezone: 'America/Recife', lat: -8.0476, lon: -34.8770 },
            { name: 'Ìè¨Î•¥ÌÉàÎ†àÏûê', timezone: 'America/Fortaleza', lat: -3.7172, lon: -38.5433 },
            { name: 'ÎßàÎÇòÏö∞Ïä§', timezone: 'America/Manaus', lat: -3.1190, lon: -60.0217 },
            { name: 'Î∂ÄÏóêÎÖ∏Ïä§ÏïÑÏù¥Î†àÏä§', timezone: 'America/Argentina/Buenos_Aires', lat: -34.6037, lon: -58.3816 },
            { name: 'ÏΩîÎ•¥ÎèÑÎ∞î', timezone: 'America/Argentina/Cordoba', lat: -31.4201, lon: -64.1888 },
            { name: 'Î°úÏÇ¨Î¶¨Ïò§', timezone: 'America/Argentina/Buenos_Aires', lat: -32.9442, lon: -60.6505 },
            { name: 'Î©òÎèÑÏÇ¨', timezone: 'America/Argentina/Mendoza', lat: -32.8895, lon: -68.8458 },
            { name: 'ÏÇ∞Ìã∞ÏïÑÍ≥†', timezone: 'America/Santiago', lat: -33.4489, lon: -70.6693 },
            { name: 'Î∞úÌååÎùºÏù¥ÏÜå', timezone: 'America/Santiago', lat: -33.0472, lon: -71.6127 },
            { name: 'Î¶¨Îßà', timezone: 'America/Lima', lat: -12.0464, lon: -77.0428 },
            { name: 'ÏïÑÎ†àÌÇ§Ìåå', timezone: 'America/Lima', lat: -16.4090, lon: -71.5375 },
            { name: 'ÎùºÌååÏä§', timezone: 'America/La_Paz', lat: -16.2902, lon: -68.1332 },
            { name: 'ÏÇ∞ÌÉÄÌÅ¨Î£®Ïä§', timezone: 'America/La_Paz', lat: -17.8146, lon: -63.1561 },
            { name: 'Î≥¥Í≥†ÌÉÄ', timezone: 'America/Bogota', lat: 4.7110, lon: -74.0721 },
            { name: 'Î©îÎç∞Ïù∏', timezone: 'America/Bogota', lat: 6.2476, lon: -75.5658 },
            { name: 'Ïπ¥ÎùºÏπ¥Ïä§', timezone: 'America/Caracas', lat: 10.4806, lon: -66.9036 },
            { name: 'ÎßàÎùºÏπ¥Ïù¥Î≥¥', timezone: 'America/Caracas', lat: 10.6316, lon: -71.6406 },
            { name: 'ÌÇ§ÌÜ†', timezone: 'America/Guayaquil', lat: -0.1807, lon: -78.4678 },
            { name: 'Í≥ºÏïºÌÇ¨', timezone: 'America/Guayaquil', lat: -2.1709, lon: -79.9224 },
            { name: 'ÏïÑÏàúÏãúÏò®', timezone: 'America/Asuncion', lat: -25.2637, lon: -57.5759 },
            { name: 'Î™¨ÌÖåÎπÑÎç∞Ïò§', timezone: 'America/Montevideo', lat: -34.9011, lon: -56.1645 },
            { name: 'Ï°∞ÏßÄÌÉÄÏö¥', timezone: 'America/Guyana', lat: 6.8013, lon: -58.1551 },
            { name: 'ÌååÎùºÎßàÎ¶¨Î≥¥', timezone: 'America/Paramaribo', lat: 5.8520, lon: -55.2038 },
            { name: 'Ïπ¥Ïòå', timezone: 'America/Cayenne', lat: 4.9224, lon: -52.3135 },
            
            // Ïò§ÏÑ∏ÏïÑÎãàÏïÑ
            { name: 'ÏãúÎìúÎãà', timezone: 'Australia/Sydney', lat: -33.8688, lon: 151.2093 },
            { name: 'Î©úÎ≤ÑÎ•∏', timezone: 'Australia/Melbourne', lat: -37.8136, lon: 144.9631 },
            { name: 'Î∏åÎ¶¨Ï¶àÎ≤à', timezone: 'Australia/Brisbane', lat: -27.4698, lon: 153.0251 },
            { name: 'ÌçºÏä§', timezone: 'Australia/Perth', lat: -31.9505, lon: 115.8605 },
            { name: 'ÏïÑÎç∏Î†àÏù¥Îìú', timezone: 'Australia/Adelaide', lat: -34.9285, lon: 138.6007 },
            { name: 'Ï∫îÎ≤ÑÎùº', timezone: 'Australia/Sydney', lat: -35.2809, lon: 149.1300 },
            { name: 'Ìò∏Î∞îÌä∏', timezone: 'Australia/Hobart', lat: -42.8821, lon: 147.3272 },
            { name: 'Îã§Ïúà', timezone: 'Australia/Darwin', lat: -12.4634, lon: 130.8456 },
            { name: 'Ïò§ÌÅ¥ÎûúÎìú', timezone: 'Pacific/Auckland', lat: -36.8485, lon: 174.7633 },
            { name: 'Ïõ∞ÎßÅÌÑ¥', timezone: 'Pacific/Auckland', lat: -41.2865, lon: 174.7762 },
            { name: 'ÌÅ¨ÎùºÏù¥Ïä§Ìä∏Ï≤òÏπò', timezone: 'Pacific/Auckland', lat: -43.5321, lon: 172.6362 },
            { name: 'Ìè¨Ìä∏Î™®Î•¥Ï¶àÎπÑ', timezone: 'Pacific/Port_Moresby', lat: -9.4780, lon: 147.1500 },
            { name: 'ÏàòÎ∞î', timezone: 'Pacific/Fiji', lat: -18.1248, lon: 178.4501 },
            { name: 'ÎàÑÎ©îÏïÑ', timezone: 'Pacific/Noumea', lat: -22.2558, lon: 166.4505 },
            { name: 'Ìò∏ÎÜÄÎ£∞Î£®', timezone: 'Pacific/Honolulu', lat: 21.3099, lon: -157.8581 },
            { name: 'ÌåîÎ¶¨ÌÇ§Î•¥', timezone: 'Pacific/Pohnpei', lat: 6.9170, lon: 158.1850 },
            { name: 'ÌÉÄÎùºÏôÄ', timezone: 'Pacific/Tarawa', lat: 1.3291, lon: 172.9790 },
            { name: 'ÏïÑÌîºÏïÑ', timezone: 'Pacific/Apia', lat: -13.7590, lon: -172.1046 },
            { name: 'ÎàÑÏø†ÏïåÎ°úÌåå', timezone: 'Pacific/Tongatapu', lat: -21.1393, lon: -175.2018 }
        ];

        let selectedCities = [];
        const MAX_CITIES = 8;
        let updateInterval = null;

        // DOM ÏöîÏÜå
        const addButton = document.getElementById('addButton');
        const cityModal = document.getElementById('cityModal');
        const closeModal = document.getElementById('closeModal');
        const citySearch = document.getElementById('citySearch');
        const cityList = document.getElementById('cityList');
        const clocksContainer = document.getElementById('clocksContainer');
        const emptyState = document.getElementById('emptyState');
        const apiKeyInput = document.getElementById('apiKeyInput');

        // Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄÏóêÏÑú Îç∞Ïù¥ÌÑ∞ Î∂àÎü¨Ïò§Í∏∞
        function loadData() {
            const saved = localStorage.getItem('worldClocks');
            if (saved) {
                selectedCities = JSON.parse(saved);
                renderClocks();
            }
            const savedApiKey = localStorage.getItem('weatherApiKey');
            if (savedApiKey) {
                apiKeyInput.value = savedApiKey;
            }
        }

        // Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄÏóê Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•
        function saveData() {
            localStorage.setItem('worldClocks', JSON.stringify(selectedCities));
        }

        // API ÌÇ§ Ï†ÄÏû•
        apiKeyInput.addEventListener('change', () => {
            localStorage.setItem('weatherApiKey', apiKeyInput.value);
            // Í∏∞Ï°¥ ÏãúÍ≥ÑÎì§Ïùò ÎÇ†Ïî® Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
            selectedCities.forEach((city, index) => {
                if (apiKeyInput.value) {
                    fetchWeather(city, index);
                }
            });
        });

        // Î™®Îã¨ Ïó¥Í∏∞
        addButton.addEventListener('click', () => {
            if (selectedCities.length >= MAX_CITIES) {
                alert(`ÏµúÎåÄ ${MAX_CITIES}Í∞úÍπåÏßÄÎßå Ï∂îÍ∞ÄÌï† Ïàò ÏûàÏäµÎãàÎã§.`);
                return;
            }
            cityModal.classList.add('active');
            renderCityList();
            citySearch.focus();
        });

        // Î™®Îã¨ Îã´Í∏∞
        closeModal.addEventListener('click', () => {
            cityModal.classList.remove('active');
            citySearch.value = '';
        });

        // Î™®Îã¨ Ïô∏Î∂Ä ÌÅ¥Î¶≠ Ïãú Îã´Í∏∞
        cityModal.addEventListener('click', (e) => {
            if (e.target === cityModal) {
                cityModal.classList.remove('active');
                citySearch.value = '';
            }
        });

        // ÎèÑÏãú Í≤ÄÏÉâ
        citySearch.addEventListener('input', () => {
            renderCityList();
        });

        // ÎèÑÏãú Î™©Î°ù Î†åÎçîÎßÅ
        function renderCityList() {
            const searchTerm = citySearch.value.toLowerCase();
            const filteredCities = cities.filter(city => 
                city.name.toLowerCase().includes(searchTerm)
            );

            cityList.innerHTML = '';

            if (filteredCities.length === 0) {
                cityList.innerHTML = '<div style="text-align: center; padding: 2rem; color: #95a5a6;">Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§.</div>';
                return;
            }

            filteredCities.forEach(city => {
                const isSelected = selectedCities.some(sc => sc.name === city.name);
                const cityItem = document.createElement('div');
                cityItem.className = `city-item ${isSelected ? 'disabled' : ''}`;
                cityItem.innerHTML = `
                    <div class="city-name">${city.name}</div>
                    <div class="city-timezone">${city.timezone}</div>
                `;
                
                if (!isSelected) {
                    cityItem.addEventListener('click', () => {
                        addCity(city);
                        cityModal.classList.remove('active');
                        citySearch.value = '';
                    });
                }
                
                cityList.appendChild(cityItem);
            });
        }

        // ÎèÑÏãú Ï∂îÍ∞Ä
        function addCity(city) {
            if (selectedCities.length >= MAX_CITIES) {
                alert(`ÏµúÎåÄ ${MAX_CITIES}Í∞úÍπåÏßÄÎßå Ï∂îÍ∞ÄÌï† Ïàò ÏûàÏäµÎãàÎã§.`);
                return;
            }

            selectedCities.push({ ...city });
            saveData();
            renderClocks();
            addButton.disabled = selectedCities.length >= MAX_CITIES;
        }

        // ÎèÑÏãú Ï†úÍ±∞
        function removeCity(index) {
            selectedCities.splice(index, 1);
            saveData();
            renderClocks();
            addButton.disabled = selectedCities.length >= MAX_CITIES;
        }

        // ÏãúÍ≥Ñ Î†åÎçîÎßÅ
        function renderClocks() {
            clocksContainer.innerHTML = '';

            if (selectedCities.length === 0) {
                clocksContainer.appendChild(emptyState);
                if (updateInterval) {
                    clearInterval(updateInterval);
                    updateInterval = null;
                }
                return;
            }

            selectedCities.forEach((city, index) => {
                const clockCard = document.createElement('div');
                clockCard.className = 'clock-card';
                clockCard.innerHTML = `
                    <div class="clock-header">
                        <div>
                            <div class="clock-city">${city.name}</div>
                            <div class="clock-timezone">${city.timezone}</div>
                        </div>
                        <div style="position: relative;">
                            <button class="menu-button" data-index="${index}" title="Î©îÎâ¥">‚ãØ</button>
                            <div class="dropdown-menu" id="menu-${index}">
                                <div class="dropdown-item delete" data-action="delete">
                                    <span>üóëÔ∏è</span>
                                    <span>ÏÇ≠Ï†ú</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="clock-time" id="time-${index}">--:--:--</div>
                    <div class="clock-date" id="date-${index}">--</div>
                    <div class="weather-section" id="weather-${index}">
                        <div class="weather-loading">ÎÇ†Ïî® Ï†ïÎ≥¥ Î°úÎî© Ï§ë...</div>
                    </div>
                `;
                const menuBtn = clockCard.querySelector('.menu-button');
                const dropdownMenu = clockCard.querySelector('.dropdown-menu');
                const deleteItem = clockCard.querySelector('.dropdown-item.delete');
                
                // Î©îÎâ¥ Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú ÎìúÎ°≠Îã§Ïö¥ ÌÜ†Í∏Ä
                menuBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    // Îã§Î•∏ Î©îÎâ¥ Îã´Í∏∞
                    document.querySelectorAll('.dropdown-menu').forEach(menu => {
                        if (menu !== dropdownMenu) {
                            menu.classList.remove('active');
                        }
                    });
                    dropdownMenu.classList.toggle('active');
                });
                
                // ÏÇ≠Ï†ú Ìï≠Î™© ÌÅ¥Î¶≠
                deleteItem.addEventListener('click', (e) => {
                    e.stopPropagation();
                    removeCity(index);
                    dropdownMenu.classList.remove('active');
                });
                
                clocksContainer.appendChild(clockCard);
            });
            
            // Ïô∏Î∂Ä ÌÅ¥Î¶≠ Ïãú Î©îÎâ¥ Îã´Í∏∞
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.menu-button') && !e.target.closest('.dropdown-menu')) {
                    document.querySelectorAll('.dropdown-menu').forEach(menu => {
                        menu.classList.remove('active');
                    });
                }
            });

            updateAllClocks();
            if (!updateInterval) {
                updateInterval = setInterval(updateAllClocks, 1000);
            }

            // ÎÇ†Ïî® Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞
            selectedCities.forEach((city, index) => {
                if (apiKeyInput.value) {
                    fetchWeather(city, index);
                } else {
                    const weatherEl = document.getElementById(`weather-${index}`);
                    weatherEl.innerHTML = '<div class="weather-error">ÎÇ†Ïî® API ÌÇ§Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî</div>';
                }
            });
        }

        // Î™®Îì† ÏãúÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
        function updateAllClocks() {
            selectedCities.forEach((city, index) => {
                updateClock(city, index);
            });
        }

        // Í∞úÎ≥Ñ ÏãúÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
        function updateClock(city, index) {
            try {
                const now = new Date();
                const timeString = now.toLocaleTimeString('ko-KR', {
                    timeZone: city.timezone,
                    hour12: false,
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                });
                const dateString = now.toLocaleDateString('ko-KR', {
                    timeZone: city.timezone,
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    weekday: 'long'
                });

                const timeEl = document.getElementById(`time-${index}`);
                const dateEl = document.getElementById(`date-${index}`);
                
                if (timeEl) timeEl.textContent = timeString;
                if (dateEl) dateEl.textContent = dateString;
            } catch (error) {
                console.error(`ÏãúÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏ Ïò§Î•ò (${city.name}):`, error);
            }
        }

        // ÎÇ†Ïî® Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞
        async function fetchWeather(city, index) {
            const apiKey = apiKeyInput.value;
            if (!apiKey) return;

            const weatherEl = document.getElementById(`weather-${index}`);
            if (!weatherEl) return;

            try {
                weatherEl.innerHTML = '<div class="weather-loading">ÎÇ†Ïî® Ï†ïÎ≥¥ Î°úÎî© Ï§ë...</div>';
                
                const response = await fetch(
                    `https://api.openweathermap.org/data/2.5/weather?lat=${city.lat}&lon=${city.lon}&appid=${apiKey}&units=metric&lang=kr`
                );

                if (!response.ok) {
                    throw new Error('ÎÇ†Ïî® Ï†ïÎ≥¥Î•º Í∞ÄÏ†∏Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§.');
                }

                const data = await response.json();
                
                const weatherIcon = getWeatherIcon(data.weather[0].main);
                weatherEl.innerHTML = `
                    <div class="weather-info">
                        <div class="weather-icon">${weatherIcon}</div>
                        <div class="weather-details">
                            <div class="weather-temp">${Math.round(data.main.temp)}¬∞C</div>
                            <div class="weather-desc">${data.weather[0].description}</div>
                        </div>
                    </div>
                `;
            } catch (error) {
                console.error('ÎÇ†Ïî® Ï†ïÎ≥¥ Ïò§Î•ò:', error);
                weatherEl.innerHTML = '<div class="weather-error">ÎÇ†Ïî® Ï†ïÎ≥¥Î•º Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§</div>';
            }
        }

        // ÎÇ†Ïî® ÏïÑÏù¥ÏΩò Îß§Ìïë
        function getWeatherIcon(weatherMain) {
            const iconMap = {
                'Clear': '‚òÄÔ∏è',
                'Clouds': '‚òÅÔ∏è',
                'Rain': 'üåßÔ∏è',
                'Drizzle': 'üå¶Ô∏è',
                'Thunderstorm': '‚õàÔ∏è',
                'Snow': '‚ùÑÔ∏è',
                'Mist': 'üå´Ô∏è',
                'Fog': 'üå´Ô∏è',
                'Haze': 'üå´Ô∏è'
            };
            return iconMap[weatherMain] || 'üå§Ô∏è';
        }

        // Ï¥àÍ∏∞Ìôî
        loadData();
        addButton.disabled = selectedCities.length >= MAX_CITIES;
    </script>
</body>
</html>
